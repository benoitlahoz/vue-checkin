# Basic Example - Todo List

Demonstration of the check-in/check-out system with a simple todo list.

## Interactive Demo

::basic-example
::

## Overview

This example illustrates the fundamental concepts of the check-in system:
- Creating a parent desk
- Automatic registration of child components
- Reactive data synchronization with `watchData`
- Lifecycle management (check-in/check-out)

## Architecture

### Parent Component: `BasicExample.vue`

The parent component creates the desk and manages the todo list state.

```vue
<script setup lang="ts">
import { useCheckIn } from '@/vue-checkin/composables/useCheckIn';
import TodoItem from './TodoItem.vue';
import { TODO_DESK_KEY } from './index';

interface TodoItem {
  label: string;
  done: boolean;
}

// Create a desk to manage items
const { createDesk } = useCheckIn<TodoItem>();
const { desk } = createDesk(TODO_DESK_KEY, {
  debug: true,
  onCheckIn: (id, data) => {
    console.log(`✅ Item added: ${id}`, data);
  },
  onCheckOut: (id) => {
    console.log(`❌ Item removed: ${id}`);
  },
});

// State to manage todos
const todos = ref([]);
</script>
```

### Child Component: `TodoItem.vue`

Each item automatically registers with the desk and synchronizes its data.

```vue
<script setup lang="ts">
import { useCheckIn } from '@/vue-checkin/composables/useCheckIn';
import { TODO_DESK_KEY } from './index';

const props = defineProps<{
  id: string | number;
  label: string;
  done: boolean;
}>();

// Auto check-in with data watching
useCheckIn<TodoItem>().checkIn(TODO_DESK_KEY, {
  id: props.id,
  autoCheckIn: true,
  watchData: true,
  data: () => ({
    label: props.label,
    done: props.done,
  }),
});
</script>
```

### InjectionKey: `index.ts`

Definition of the typed injection key for better type-safety.

```typescript
import type { InjectionKey } from 'vue';
import type { CheckInDesk } from '@/vue-checkin/composables/useCheckIn';

interface TodoItem {
  label: string;
  done: boolean;
}

export const TODO_DESK_KEY: InjectionKey<CheckInDesk<TodoItem>> = Symbol('todoDesk');

export { default as BasicExample } from './BasicExample.vue';
export { default as TodoItem } from './TodoItem.vue';
```

## Features

### Adding a Task

```typescript
const addItem = () => {
  const id = Date.now();
  todos.value.push({
    id,
    label: `Task ${id}`,
    done: false,
  });
};
```

The `TodoItem` component will automatically register with the desk thanks to `autoCheckIn: true`.

### Toggling a Task

```typescript
const toggleItem = (id: string | number) => {
  const todo = todos.value.find(t => t.id === id);
  if (todo) {
    todo.done = !todo.done;
  }
};
```

Changes are automatically synchronized with the desk thanks to `watchData: true`.

### Removing a Task

```typescript
const removeItem = (id: string | number) => {
  const index = todos.value.findIndex(t => t.id === id);
  if (index !== -1) {
    todos.value.splice(index, 1);
  }
};
```

The component automatically unregisters when destroyed.

## Key Concepts

::alert{type="info"}
**Auto Check-In**: Child components automatically register on mount thanks to `autoCheckIn: true`.
::

::alert{type="info"}
**Watch Data**: Data is automatically synchronized with the desk thanks to `watchData: true`.
::

::alert{type="info"}
**InjectionKey**: Using `Symbol` for typed and safe injection.
::

## Usage

```vue
<template>
  <BasicExample />
</template>

<script setup lang="ts">
import { BasicExample } from '@/components/examples/basic-example';
</script>
```

## Important Points

- The `desk` is not passed as a prop, it's injected via `TODO_DESK_KEY`
- Children manage their own registration/unregistration
- Synchronization is automatic thanks to `watchData`
- Each prop modification triggers an update in the desk
