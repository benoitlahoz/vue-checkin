# Tabs Example - Tab Navigation

Example using a tab system with shared context.

## Interactive Demo

::tabs-example
::

## Overview

This example demonstrates:
- Using **context** to share data between the desk and its children
- Managing shared active state
- Dynamically adding and removing items
- Parent-child communication via events

## Architecture

### Parent Component: `TabsExample.vue`

The parent component creates a desk with context to share the active tab.

```vue
<script setup lang="ts">
import { useCheckIn } from '@/vue-checkin/composables/useCheckIn';
import TabItem from './TabItem.vue';
import { TABS_DESK_KEY } from './index';

interface TabItem {
  label: string;
  content: string;
  icon?: string;
}

// Context to store the active tab
const activeTabId = ref<string | number>('tab-1');

// Create a desk with context
const { createDesk } = useCheckIn<TabItem, { activeTab: Ref<string | number> }>();
const { desk } = createDesk(TABS_DESK_KEY, {
  context: { activeTab: activeTabId },
  debug: false,
});
</script>
```

### Child Component: `TabItem.vue`

Each tab registers and can access the shared context.

```vue
<script setup lang="ts">
import { useCheckIn } from '@/vue-checkin/composables/useCheckIn';
import { TABS_DESK_KEY } from './index';

const props = defineProps<{
  id: string | number;
  label: string;
  content: string;
  icon?: string;
  isActive: boolean;
  canClose: boolean;
}>();

// Auto check-in with data watching
useCheckIn<TabItem>().checkIn(TABS_DESK_KEY, {
  id: props.id,
  autoCheckIn: true,
  watchData: true,
  data: () => ({
    label: props.label,
    content: props.content,
    icon: props.icon,
  }),
});
</script>
```

### InjectionKey: `index.ts`

```typescript
import type { InjectionKey } from 'vue';
import type { CheckInDesk } from '@/vue-checkin/composables/useCheckIn';

interface TabData {
  label: string;
  icon: string;
}

export const TABS_DESK_KEY: InjectionKey<CheckInDesk<TabData>> = Symbol('tabsDesk');

export { default as TabsExample } from './TabsExample.vue';
export { default as TabItem } from './TabItem.vue';
```

## Features

### Shared Context

The context allows sharing reactive data between the parent and all children:

```typescript
const { desk } = createDesk(TABS_DESK_KEY, {
  context: { activeTab: activeTabId },
});
```

All child components can access `activeTab` via the desk.

### Tab Selection

```typescript
const selectTab = (id: string | number) => {
  activeTabId.value = id;
};
```

Context changes are reactive and all tabs are notified.

### Adding a Tab

```typescript
const addTab = () => {
  const id = `tab-${Date.now()}`;
  tabsData.value.push({
    id,
    label: `Tab ${tabsData.value.length + 1}`,
    content: 'New content',
    icon: 'i-heroicons-document',
  });
  activeTabId.value = id;
};
```

### Closing a Tab

```typescript
const closeTab = (id: string | number) => {
  const index = tabsData.value.findIndex(t => t.id === id);
  if (index !== -1) {
    tabsData.value.splice(index, 1);
    // Select previous or next tab
    if (activeTabId.value === id && tabsData.value.length > 0) {
      const newIndex = Math.max(0, index - 1);
      activeTabId.value = tabsData.value[newIndex].id;
    }
  }
};
```

## Key Concepts

::alert{type="info"}
**Context**: Allows sharing reactive data between the desk and all its registered children.
::

::alert{type="info"}
**Active State**: The `activeTab` context is shared and reactive, all components react to changes.
::

::alert{type="success"}
**Context Typing**: The second generic parameter of `useCheckIn` defines the context type.
::

## Usage

```vue
<template>
  <TabsExample />
</template>

<script setup lang="ts">
import { TabsExample } from '@/components/examples/tabs-example';
</script>
```

## Important Points

- The context is typed with the second generic parameter of `useCheckIn<T, TContext>`
- Children don't receive the context as a prop, they access it via the desk
- The context is reactive: all changes are propagated automatically
- Useful for sharing global state (active tab, mode, theme, etc.)
