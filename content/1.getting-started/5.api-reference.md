---
title: API Reference
description: Complete API documentation for useCheckIn composable
navigation:
  icon: i-lucide-book-open
seo:
  title: API Reference - VueAirport
  description: Complete API reference for the useCheckIn composable, including all methods, types, and options.
---

Complete API reference for the `useCheckIn` composable and related types.

## useCheckIn()

The main composable for creating and managing check-in desks.

```typescript
const { createDesk, checkIn, standaloneDesk, generateId, memoizedId, isCheckedIn, getRegistry, clearIdCache } = useCheckIn<T, TContext>();
```

### Type Parameters

| Parameter | Description | Default |
|-----------|-------------|---------|
| `T` | Type of data stored in the desk | `any` |
| `TContext` | Type of additional context provided by the desk | `{}` |

### Returned Methods

#### createDesk()

Creates a check-in desk and provides it to child components.

```typescript
createDesk(
  injectionKey: InjectionKey<DeskWithContext<T, TContext>>,
  options?: DeskCoreOptions<T> & { context?: TContext }
): { desk: DeskWithContext<T, TContext>, injectionKey: InjectionKey }
```

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| `injectionKey` | `InjectionKey<DeskWithContext<T, TContext>>` | Symbol-based injection key for dependency injection |
| `options` | `DeskCoreOptions<T> & { context?: TContext }` | Desk configuration and context |

**Options:**

| Option | Type | Description | Default |
|--------|------|-------------|---------|
| `context` | `TContext` | Additional context to share with child components | `undefined` |
| `onBeforeCheckIn` | `(id, data) => boolean \| undefined` | Hook called before check-in, return `false` to cancel | `undefined` |
| `onCheckIn` | `(id, data) => void` | Hook called after successful check-in | `undefined` |
| `onBeforeCheckOut` | `(id) => boolean \| undefined` | Hook called before check-out, return `false` to cancel | `undefined` |
| `onCheckOut` | `(id) => void` | Hook called after successful check-out | `undefined` |
| `debug` | `boolean` | Enable debug logging | `false` |
| `devTools` | `boolean` | Enable Vue DevTools integration | `false` |
| `plugins` | `CheckInPlugin<T>[]` | Array of plugins to extend functionality | `[]` |
| `deskId` | `string` | Identifier for DevTools display | Auto-generated |

**Returns:** An object containing:
- `desk`: The desk instance with context
- `injectionKey`: The injection key used

**Example:**

```typescript
const TABS_DESK_KEY = Symbol('tabsDesk');

const { createDesk } = useCheckIn<TabItemData, TabItemContext>();
const { desk } = createDesk(TABS_DESK_KEY, {
  devTools: true,
  context: {
    activeTab: ref('tab-1'),
    selectTab: (id) => { /* ... */ },
  },
  onCheckIn: (id, data) => {
    console.log(`Tab ${id} checked in with data:`, data);
  },
});
```

#### checkIn()

Registers a child component with a desk.

```typescript
checkIn(
  parentDeskOrKey: DeskCore<T> & TContext | InjectionKey<DeskCore<T> & TContext> | null | undefined,
  checkInOptions?: CheckInOptions<T, TContext>
): CheckInResult<T, TContext>
```

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| `parentDeskOrKey` | `DeskCore<T> & TContext \| InjectionKey \| null \| undefined` | Desk instance or injection key |
| `checkInOptions` | `CheckInOptions<T, TContext>` | Check-in configuration |

**Check-in Options:**

| Option | Type | Description | Default |
|--------|------|-------------|---------|
| `id` | `string \| number` | Unique identifier for this component | Auto-generated |
| `autoCheckIn` | `boolean` | Automatically check in on component mount | `false` |
| `data` | `T \| (() => T) \| ((desk) => T)` | Data to register, or function that returns data | `undefined` |
| `watchData` | `boolean` | Watch data for changes and auto-update | `false` |
| `shallow` | `boolean` | Use shallow watching instead of deep | `false` |
| `watchCondition` | `(() => boolean) \| Ref<boolean>` | Condition for conditional check-in | `undefined` |
| `meta` | `Record<string, any>` | Additional metadata | `undefined` |
| `debug` | `boolean` | Enable debug logging for this check-in | `false` |

**Returns:** An object containing:
- `desk`: Reference to the desk (with context if provided)
- `checkOut()`: Function to manually check out
- `updateSelf(newData?)`: Function to manually update data

**Example:**

```typescript
const { checkIn } = useCheckIn<TabItemData, TabItemContext>();
const { desk, checkOut, updateSelf } = checkIn(TABS_DESK_KEY, {
  id: props.id,
  autoCheckIn: true,
  watchData: true,
  data: (desk) => {
    const tabData = desk.tabsData.value.find(t => t.id === props.id);
    return {
      label: tabData?.label ?? '',
      content: tabData?.content ?? '',
    };
  },
});
```

::note
**New Feature:** The `data` function now receives the desk as a parameter, allowing elegant access to the desk context without manual `inject` calls.
::

#### standaloneDesk()

Creates a standalone desk without dependency injection (useful for testing).

```typescript
standaloneDesk(options?: DeskCoreOptions<T>): DeskCore<T>
```

**Example:**

```typescript
const desk = standaloneDesk<TabItemData>({
  debug: true,
});

desk.checkIn('tab-1', { label: 'Home' });
```

#### generateId()

Generates a cryptographically secure unique ID.

```typescript
generateId(prefix?: string): string
```

**Parameters:**
- `prefix`: Optional prefix for the ID (default: `'item'`)

**Example:**

```typescript
const id = generateId('tab'); // e.g., "tab-a1b2c3d4..."
```

#### memoizedId()

Generates a memoized ID for a component, ensuring stability across remounts.

```typescript
memoizedId(
  instanceOrId: object | string | number | null | undefined,
  prefix?: string
): string
```

**Parameters:**
- `instanceOrId`: Vue instance, custom ID, or null
- `prefix`: Optional prefix for the ID

**Example:**

```typescript
import { getCurrentInstance } from 'vue';

const instance = getCurrentInstance();
const id = memoizedId(instance, 'tab'); // Stable across re-renders
```

#### isCheckedIn()

Computed helper to check if a specific ID is checked in.

```typescript
isCheckedIn<T, TContext>(
  desk: DeskCore<T> & TContext,
  id: string | number | Ref<string | number>
): ComputedRef<boolean>
```

**Example:**

```typescript
const isTabActive = isCheckedIn(desk, 'tab-1');
// isTabActive.value === true/false
```

#### getRegistry()

Computed helper to get the registry as an array, with optional sorting.

```typescript
getRegistry<T, TContext>(
  desk: DeskCore<T> & TContext,
  options?: { sortBy?: keyof T | 'timestamp'; order?: 'asc' | 'desc' }
): ComputedRef<CheckInItem<T>[]>
```

**Example:**

```typescript
// Get all tabs sorted by timestamp
const allTabs = getRegistry(desk, {
  sortBy: 'timestamp',
  order: 'desc'
});
```

#### clearIdCache()

Clears the memoization cache for custom IDs.

```typescript
clearIdCache(resetCounter?: boolean): void
```

**Parameters:**
- `resetCounter`: Whether to reset the instance counter (default: `false`)

## DeskCore API

The desk instance provides methods to interact with the registry.

### Methods

#### checkIn()

Manually register an item.

```typescript
desk.checkIn(id: string | number, data: T, meta?: Record<string, any>): boolean
```

**Returns:** `true` if successful, `false` if cancelled by plugin/hook

#### checkOut()

Manually unregister an item.

```typescript
desk.checkOut(id: string | number): boolean
```

**Returns:** `true` if successful, `false` if not found or cancelled

#### update()

Update an existing item's data.

```typescript
desk.update(id: string | number, data: T): boolean
```

**Returns:** `true` if successful, `false` if not found

#### get()

Retrieve a specific item by ID.

```typescript
desk.get(id: string | number): CheckInItem<T> | undefined
```

#### has()

Check if an ID exists in the registry.

```typescript
desk.has(id: string | number): boolean
```

#### getAll()

Get all items, optionally sorted.

```typescript
desk.getAll(options?: {
  sortBy?: keyof T | 'timestamp';
  order?: 'asc' | 'desc';
}): CheckInItem<T>[]
```

#### count()

Get the number of checked-in items.

```typescript
desk.count(): number
```

**Returns:** Reactive computed ref with the count

#### clear()

Remove all items from the registry.

```typescript
desk.clear(): void
```

#### on()

Subscribe to desk events.

```typescript
desk.on(event: DeskEventType, callback: DeskEventCallback<T>): () => void
```

**Events:**
- `'check-in'`: Fired when an item checks in
- `'check-out'`: Fired when an item checks out
- `'update'`: Fired when an item is updated
- `'clear'`: Fired when the desk is cleared

**Returns:** Unsubscribe function

**Example:**

```typescript
const unsubscribe = desk.on('check-in', ({ id, data }) => {
  console.log(`Item ${id} checked in:`, data);
});

// Later: unsubscribe()
```

#### off()

Unsubscribe from desk events.

```typescript
desk.off(event: DeskEventType, callback: DeskEventCallback<T>): void
```

#### destroy()

Clean up the desk and remove all listeners.

```typescript
desk.destroy(): void
```

::note 
**Memory Management:** `desk` automatically cleans up on component unmount. Use `destroy()` for manual cleanup in long-running applications.
::

## Types

### CheckInItem

Represents an item in the desk registry.

```typescript
interface CheckInItem<T = any> {
  id: string | number;
  data: T;
  timestamp?: number;
  meta?: Record<string, any>;
}
```

### DeskEventType

Type of events emitted by the desk.

```typescript
type DeskEventType = 'check-in' | 'check-out' | 'update' | 'clear';
```

### DeskEventCallback

Callback signature for desk events.

```typescript
type DeskEventCallback<T = any> = (payload: {
  id?: string | number;
  data?: T;
  timestamp: number;
}) => void;
```

### CheckInPlugin

Plugin interface for extending desk functionality.

```typescript
interface CheckInPlugin<T = any> {
  name: string;
  onBeforeCheckIn?: (id: string | number, data: T, desk: DeskCore<T>) => boolean | undefined;
  onCheckIn?: (id: string | number, data: T, desk: DeskCore<T>) => void;
  onBeforeCheckOut?: (id: string | number, desk: DeskCore<T>) => boolean | undefined;
  onCheckOut?: (id: string | number, desk: DeskCore<T>) => void;
  onUpdate?: (id: string | number, data: T, desk: DeskCore<T>) => void;
}
```

## Best Practices

- **Use Type Parameters:** Always provide type parameters for `useCheckIn<T, TContext>()` to get full type safety and IntelliSense support.

- **Desk Parameter in Data Function:** When using the desk parameter in the `data` function with `watchData: true`, remember that the function is re-evaluated on each data change. Keep the logic lightweight to avoid performance issues.

- **Auto Check-in vs Manual:** Use `autoCheckIn: true` for components that should always be registered. Use manual `checkIn()` calls when you need more control over the registration timing.

- **Memory Management:** The desk automatically cleans up on unmount, but if you need to manually clean up (e.g., in long-running SPAs), use `clearIdCache()` and `desk.destroy()`.
