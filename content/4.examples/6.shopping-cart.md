---
title: Shopping Cart 
description: E-commerce cart with lifecycle hooks and user confirmation.
navigation:
  icon: i-heroicons-shopping-cart
seo:
  title: Shopping Cart - VueCheckIn
  description: Build a shopping cart with VueCheckIn featuring lifecycle hooks, onBeforeCheckOut confirmation, and automatic total calculation.
---

A complete e-commerce shopping cart demonstration:

- Lifecycle hooks (`onCheckIn`, `onCheckOut`, `onBeforeCheckOut`)
- User confirmation before removing items
- Dynamic cart total calculation
- Product quantity management
- Auto check-in for cart items

::example-loader{:component="ShoppingCart"}
::

## Project Structure

```
shopping-cart/
├── index.ts              # Shared types and injection key
├── ShoppinCart.vue       # Parent cart component
└── ProductCard.vue       # Individual product card
```

## Shared Types (index.ts)

```typescript
import type { InjectionKey } from 'vue';
import type { DeskCore } from '#vue-checkin/composables/useCheckIn';

export interface CartItem {
  name: string;
  price: number;
  quantity: number;
  imageUrl?: string;
}

export const CART_DESK_KEY: InjectionKey<DeskCore<CartItem>> = Symbol('cartDesk');

export { default as ShoppingCart } from './ShoppinCart.vue';
export { default as ProductCard } from './ProductCard.vue';
```

## Parent Component (ShoppinCart.vue)

Creates the cart desk with lifecycle hooks:

```vue
<script setup lang="ts">
import { useCheckIn } from '#vue-checkin/composables/useCheckIn';
import ProductCard from './ProductCard.vue';
import { type CartItem, CART_DESK_KEY } from '.';

// Create a desk for the shopping cart with lifecycle hooks
const { createDesk } = useCheckIn<CartItem>();
const { desk } = createDesk(CART_DESK_KEY, {
  debug: true,
  onCheckIn: (id, data) => {
    console.log(`✅ Product added to cart: ${data.name}`);
  },
  onCheckOut: (id) => {
    console.log(`❌ Product removed from cart: ${id}`);
  },
  onBeforeCheckOut: () => {
    const confirmed = confirm('Do you really want to remove this product from the cart?');
    return confirmed;
  },
});

// Available products catalog
const products = ref([
  {
    id: 'product-1',
    name: 'Laptop Pro',
    price: 1299.99,
    quantity: 1,
    imageUrl: 'i-heroicons-computer-desktop',
  },
  {
    id: 'product-2',
    name: 'Wireless Mouse',
    price: 49.99,
    quantity: 1,
    imageUrl: 'i-heroicons-cursor-arrow-rays',
  },
  {
    id: 'product-3',
    name: 'Mechanical Keyboard',
    price: 159.99,
    quantity: 1,
    imageUrl: 'i-heroicons-command-line',
  },
  {
    id: 'product-4',
    name: 'USB-C Hub',
    price: 79.99,
    quantity: 1,
    imageUrl: 'i-heroicons-circle-stack',
  },
  {
    id: 'product-5',
    name: 'Monitor 27"',
    price: 399.99,
    quantity: 1,
    imageUrl: 'i-heroicons-tv',
  },
  {
    id: 'product-6',
    name: 'Webcam HD',
    price: 89.99,
    quantity: 1,
    imageUrl: 'i-heroicons-video-camera',
  },
]);

// Computed properties for cart data
const cartItems = computed(() => desk.getAll());
const cartCount = computed(() => desk.registryMap.size);
const cartTotal = computed(() => {
  return cartItems.value.reduce((total, item) => {
    return total + (item.data.price * item.data.quantity);
  }, 0);
});

// Function to update product quantity
const updateQuantity = (id: string, quantity: number) => {
  const product = products.value.find(p => p.id === id);
  if (product) {
    product.quantity = Math.max(1, quantity);
  }
};

// Function to clear the entire cart
const clearCart = () => {
  if (confirm('Do you really want to empty the cart?')) {
    desk.clear();
  }
};

// Function to proceed to checkout
const checkout = () => {
  if (cartItems.value.length === 0) {
    alert('Your cart is empty!');
    return;
  }

  const orderSummary = cartItems.value
    .map(item => `${item.data.name} x${item.data.quantity} - $${(item.data.price * item.data.quantity).toFixed(2)}`)
    .join('\n');

  alert(`Order confirmed!\n\nSummary:\n${orderSummary}\n\nTotal: $${cartTotal.value.toFixed(2)}`);
  desk.clear();
};
</script>

<template>
  <div>
    <div class="shop-layout">
      <!-- Products section -->
      <div class="products-section">
        <h3>Available Products</h3>
        <div class="products-grid">
          <ProductCard
            v-for="product in products"
            :id="product.id"
            :key="product.id"
            :name="product.name"
            :price="product.price"
            :quantity="product.quantity"
            :image-url="product.imageUrl"
            @update-quantity="updateQuantity"
          />
        </div>
      </div>

      <!-- Shopping cart -->
      <div class="cart-section">
        <div class="cart-header">
          <h3>Cart</h3>
          <UBadge color="primary" variant="subtle">
            {{ cartCount }} item(s)
          </UBadge>
        </div>

        <div v-if="cartItems.length === 0" class="empty-cart">
          <UIcon name="i-heroicons-shopping-cart" class="empty-icon" />
          <p>Your cart is empty</p>
        </div>

        <div v-else class="cart-content">
          <div class="cart-items">
            <div
              v-for="item in cartItems"
              :key="item.id"
              class="cart-item"
            >
              <div class="item-info">
                <UIcon :name="item.data.imageUrl || 'i-heroicons-cube'" class="item-icon" />
                <div>
                  <strong>{{ item.data.name }}</strong>
                  <span class="item-quantity">Quantity: {{ item.data.quantity }}</span>
                </div>
              </div>
              <div class="item-price">
                ${{ (item.data.price * item.data.quantity).toFixed(2) }}
              </div>
            </div>
          </div>

          <div class="cart-summary">
            <div class="total-line">
              <span class="total-label">Total</span>
              <span class="total-amount">${{ cartTotal.toFixed(2) }}</span>
            </div>
          </div>

          <div class="cart-actions">
            <UButton
              color="primary"
              icon="i-heroicons-check"
              block
              @click="checkout"
            >
              Checkout
            </UButton>
            <UButton
              color="error"
              variant="soft"
              icon="i-heroicons-trash"
              block
              @click="clearCart"
            >
              Clear Cart
            </UButton>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
```

## Child Component (ProductCard.vue)

Individual product that can be added to the cart:

```vue
<script setup lang="ts">
import { useCheckIn } from '#vue-checkin/composables/useCheckIn';
import { type CartItem, CART_DESK_KEY } from '.';

const props = defineProps<{
  id: string;
  name: string;
  price: number;
  quantity: number;
  imageUrl?: string;
}>();

const emit = defineEmits<{
  updateQuantity: [id: string, quantity: number];
}>();

// Get access to the cart desk (without auto check-in)
useCheckIn<CartItem>();
const desk = inject(CART_DESK_KEY);

if (!desk) {
  console.error('Cart desk not found!');
}

// Check if product is in the cart
const isInCart = computed(() => desk?.has(props.id) ?? false);

// Function to add product to cart
const addToCart = () => {
  desk?.checkIn(props.id, {
    name: props.name,
    price: props.price,
    quantity: props.quantity,
    imageUrl: props.imageUrl,
  });
};

// Function to remove product from cart
const removeFromCart = () => {
  desk?.checkOut(props.id);
};

// Function to increment quantity
const increment = () => {
  const newQuantity = props.quantity + 1;
  emit('updateQuantity', props.id, newQuantity);
  // Update the cart with new quantity
  desk?.update(props.id, {
    quantity: newQuantity,
  });
};

// Function to decrement quantity
const decrement = () => {
  const newQuantity = Math.max(1, props.quantity - 1);
  emit('updateQuantity', props.id, newQuantity);
  // Update the cart with new quantity
  desk?.update(props.id, {
    quantity: newQuantity,
  });
};
</script>

<template>
  <div class="product-card">
    <div class="product-icon">
      <UIcon :name="imageUrl || 'i-heroicons-cube'" />
    </div>
    
    <div class="product-info">
      <h4 class="product-name">{{ name }}</h4>
      <div class="product-price">${{ price.toFixed(2) }}</div>
    </div>

    <div class="product-actions">
      <!-- Add to Cart button when not in cart -->
      <UButton
        v-if="!isInCart"
        size="sm"
        color="primary"
        icon="i-heroicons-shopping-cart"
        block
        @click="addToCart"
      >
        Add to Cart
      </UButton>

      <!-- Quantity controls when in cart -->
      <div v-if="isInCart" class="quantity-controls">
        <UButton
          size="xs"
          color="primary"
          variant="soft"
          icon="i-heroicons-minus"
          :disabled="quantity <= 1"
          @click="decrement"
        />
        <span class="quantity-value">{{ quantity }}</span>
        <UButton
          size="xs"
          color="primary"
          variant="soft"
          icon="i-heroicons-plus"
          @click="increment"
        />
      </div>

      <UButton
        v-if="isInCart"
        size="xs"
        color="error"
        variant="ghost"
        icon="i-heroicons-trash"
        @click="removeFromCart"
      >
        Remove
      </UButton>
      
      <UBadge v-if="isInCart" color="success" variant="subtle">
        <UIcon name="i-heroicons-check" />
        In Cart
      </UBadge>
    </div>
  </div>
</template>
```

## Key Concepts

### Lifecycle Hooks

The desk provides lifecycle hooks for tracking operations:

```typescript
createDesk(CART_DESK_KEY, {
  onCheckIn: (id, data) => {
    console.log(`Product added: ${data.name}`);
  },
  onCheckOut: (id) => {
    console.log(`Product removed: ${id}`);
  },
  onBeforeCheckOut: () => {
    // Return false to cancel the check-out
    return confirm('Remove this product?');
  },
});
```

### onBeforeCheckOut Hook

This hook allows **user confirmation** before removing items:
- Return `true` to allow the operation
- Return `false` to cancel it
- Perfect for destructive operations

### Dynamic Total Calculation

The cart total is computed automatically from registry data:

```typescript
const cartTotal = computed(() => {
  return cartItems.value.reduce((total, item) => {
    return total + (item.data.price * item.data.quantity);
  }, 0);
});
```

### Quantity Management

Products can update their quantity in the cart:

```typescript
desk?.update(props.id, {
  quantity: newQuantity,
});
```

## How It Works

1. **Desk is created** with lifecycle hooks for cart operations
2. **Products can be added** to the cart via `checkIn()`
3. **onCheckIn hook** logs when products are added
4. **Quantity updates** use the `update()` method
5. **onBeforeCheckOut** prompts for confirmation before removal
6. **Cart total** is recalculated automatically when items change

## Usage

This pattern is ideal for:
- E-commerce shopping carts
- Product catalogs with cart functionality
- Any system requiring user confirmation before removal
- Applications with calculated totals or summaries
- Checkout flows with item management
